Generated Headers
*****************

Output Structure
================
PeakRDL Cheader generates a C Header from a System RDL design, structured
as shown below. The ``root_name`` will be based on the top level address map name
with the package was generated

| ``<root_name>``
| ├── ``reg_model``
| │ └── ``<root_name>.h``
| └── ``tests``
|   └── ``<root_name>.c``

In the folder structure above:

- ``<root_name>.h`` - This is the register abstraction layer code for the design
- ``test_<root_name>.py`` - This is a set of autogenerated unittests to verify the register abstraction layer

Running the Unit Tests
======================

There are many ways to run tests. The easiest method is with the GCC compiler

.. code-block:: bash

    # generate the C Headers from the System RDL
    peakrdl_cheader basic.rdl --outdir peakcheader_output
    # use GCC to compile the C Header and Test Bench
    gcc peakcheader_output/tests/test_basic.c -I peakcheader_output/reg_model -o peakcheader_output/basic
    # Run the Test Bench
    peakcheader_output/basic

